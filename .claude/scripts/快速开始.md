# 快速开始：配置管理与案件模板

## 🎯 方案实施完成总结

### 已实施的项目

#### ✅ 配置修复完成
已修复全部 4 个配置文件的 16 处错误：
- ✓ CLAUDE.md（10处）
- ✓ tools/pdf_processor.md（3处）
- ✓ memory/README.md（1处）
- ✓ templates/README.md（2处）

#### ✅ 配置一致性检查工具
创建了 `verify-config.sh` 脚本：
```bash
# 检查所有配置文件
.claude/scripts/verify-config.sh

# 自动修复问题（带备份）
.claude/scripts/verify-config.sh --fix
```

#### ✅ 案件模板完善
完善了 `.claude/templates/case-templates/` 的 3 个核心文件：
- ✓ `[案件编号]案件信息.md`（v2.1）- 案件管理看板
- ✓ `[案件编号]工时记录.md`（v2.0）- 工时记录和费用
- ✓ `[案件编号].yaml` - 结构化日程数据

## 🚀 立即使用

### 1. 验证配置一致性

首次使用，验证所有配置是否正确：
```bash
cd /Users/maoking/Library/Application Support/maoscripts/SuitAgent
./.claude/scripts/verify-config.sh
```

**预期输出**：
```
✓ 恭喜！所有配置都一致，没有发现任何问题。
```

### 2. 创建新案件

使用 `new-case` 技能创建标准化案件：
```bash
# 在对话中输入
"请为案件 [2025]京0105民初1234号 创建工作区"
```

系统将自动创建：
- 12层标准目录结构
- 3个核心案件文件（案件信息.md、工时记录.md、yaml）
- 所有必要的.gitkeep文件

### 3. 使用配置检查清单

每次修改模板后，运行：
```bash
.claude/scripts/verify-config.sh --verbose
```

如果发现错误：
```bash
# 先检查变更
.claude/scripts/verify-config.sh --fix --dry-run  # 实际脚本不支持dry-run，会创建备份

# 确认后修复
.claude/scripts/verify-config.sh --fix
```

## 📋 配置变更检查清单

**下次修改模板目录结构时，请使用此清单：**

- [ ] 更新 `.claude/templates/case-templates/` 目录结构
- [ ] 更新 `CLAUDE.md` 中的路径引用
  - [ ] 第656-662行：输出目录结构示例
  - [ ] 第747-752行：文档分类表格
  - [ ] 第787-788行：文档命名规范
  - [ ] 第831-839行：Agent输出指引
- [ ] 更新关键工具配置
  - [ ] `tools/pdf_processor.md` 第239行（硬编码路径）
  - [ ] 其他工具脚本中的硬编码路径
- [ ] 更新文档说明
  - [ ] `memory/README.md` 第22-33行（案件级记忆说明）
  - [ ] `templates/README.md` 第133行（命名示例）
  - [ ] `templates/README.md` 第187-193行（示例代码）
- [ ] 运行验证脚本检查一致性
- [ ] 更新 `CHANGELOG.md` 记录变更
- [ ] 提交代码并标注版本号

## 🔍 配置文件速查

| 文件 | 作用 | 关键行 | 备注 |
|------|------|--------|------|
| **CLAUDE.md** | AI主指导文件 | 656-839 | 必须保持最新 |
| **tools/pdf_processor.md** | PDF处理工具 | 239 | 硬编码路径 |
| **memory/README.md** | 记忆系统说明 | 22-33 | 案件级记忆位置 |
| **templates/README.md** | 模板说明文档 | 133, 187 | 命名规范和示例 |

## 🛠️ 工具链

### 验证工具
```bash
# 完整检查
.claude/scripts/verify-config.sh

# 详细模式
.claude/scripts/verify-config.sh --verbose

# 检查单个文件
.claude/scripts/verify-config.sh --check CLAUDE.md

# 自动修复（带备份）
.claude/scripts/verify-config.sh --fix
```

### 模板工具
```bash
# 手动复制模板（如果需要）
cp -r .claude/templates/case-templates/ output/[案件编号]/

# 重命名核心文件
mv "output/[案件编号]/[案件编号]案件信息.md" \
   "output/[案件编号]/[2025]京0105民初1234号案件信息.md"
```

### 文档转换
```bash
# 转换为Word（法律文书格式）
/2word --format=legal-standard \
  "06 - 📝 法律文书/起诉状/起诉状.md" \
  "06 - 📝 法律文书/起诉状/起诉状.docx"
```

## 📊 当前项目状态

### ✅ 已完成
- [x] 修复所有配置文件错误（16处）
- [x] 创建配置一致性检查脚本
- [x] 完善案件模板核心文件（3个）
- [x] 更新memory/README.md说明
- [x] 创建脚本说明文档
- [x] 添加脚本执行权限

### 🔄 已建立机制
- [x] 配置一致性自动检查
- [x] 配置文件变更检查清单
- [x] 旧命名到新命名的映射表（脚本维护）
- [x] 多层次记忆系统文档（系统/个人/案件）

### 📝 建议后续完善
- [ ] 添加.git/pre-commit hook（自动检查）
- [ ] 创建 `config/paths.yaml`（单一真实源）
- [ ] 创建 `rename-folders.sh`（批量重命名工具）
- [ ] 添加配置版本管理（v2.0, v3.0等）
- [ ] 创建配置变更通知机制

## 🎯 下一步行动

1. **立即行动**：运行验证脚本确认配置一致性
   ```bash
   .claude/scripts/verify-config.sh
   ```

2. **使用模板**：创建新案件测试完整流程
   ```bash
   # 使用对话
   "请为案件 [2025]京0105民初1234号 创建工作区"
   ```

3. **文档更新**（如果修改模板时）：
   - 使用检查清单确保所有引用更新
   - 运行验证脚本确认无错误
   - 提交时更新CHANGELOG.md

4. **可选-高级功能**：
   - 配置Git Hook（提交前自动检查）
   - 创建单一真实源配置文件（推荐）

## 📚 相关文档

- [配置一致性检查脚本说明](README.md)
- [CLAUDE.md](../../../CLAUDE.md) - 系统核心配置
- [templates/README.md](../../templates/README.md) - 模板说明
- [memory/README.md](../../memory/README.md) - 记忆系统说明
- [案件管理看板模板](../../../templates/case-templates/[案件编号]案件信息.md)
- [工时记录模板](../../../templates/case-templates/[案件编号]工时记录.md)

## ❓ 常见问题

**Q: 如何确保配置不会再次出错？**
A: 每次修改后运行 `.claude/scripts/verify-config.sh`

**Q: 发现错误如何快速修复？**
A: 运行 `.claude/scripts/verify-config.sh --fix`（会自动备份）

**Q: 需要修改目录结构怎么办？**
A: 按📋 配置变更检查清单的步骤操作

**Q: 没有`.claude/scripts/`目录？**
A: 已创建，包含 `verify-config.sh` 和 `README.md`

---

**文档版本**: v1.0
**最后更新**: 2025-11-19
**维护人**: AI Agent
