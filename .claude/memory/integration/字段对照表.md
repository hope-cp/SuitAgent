# 委托文件生成系统字段对照表

> 版本: v1.0
> 更新日期: 2025-11-14
> 目的: 统一委托文件生成系统与SuitAgent系统的字段标准

## 概述

本文档定义了委托文件生成系统占位符与SuitAgent案件YAML文件的字段映射关系，确保两个系统能够无缝整合。

## 字段映射标准

### 委托人信息 (client_info)

| 原系统占位符 | YAML字段路径 | 中文名称 | 示例值 | 必填 |
|-------------|-------------|----------|--------|------|
| `{client}` | `案件基本信息.委托人信息.client_name` | 委托人名称 | 张三有限公司 | ✓ |
| `{type}` | `案件基本信息.委托人信息.client_type` | 委托人类型（公司/自然人） | 公司 | ✓ |
| `{code}` | `案件基本信息.委托人信息.client_code` | 统一社会信用代码/身份证号 | 912345678901234567 | ✓ |
| `{address}` | `案件基本信息.委托人信息.client_address` | 住所地/地址 | 北京市朝阳区xxx街道 | ✓ |
| `{representative}` | `案件基本信息.委托人信息.legal_representative` | 法定代表人 | 李四 | ✓ |
| `{position}` | `案件基本信息.委托人信息.representative_position` | 法定代表人职位 | 总经理 | ✓ |

### 律师信息 (lawyer_info)

| 原系统占位符 | YAML字段路径 | 中文名称 | 示例值 | 必填 |
|-------------|-------------|----------|--------|------|
| `{lawyer}` | `案件基本信息.律师信息.lawyer_name` | 律师姓名 | 王五 | ✓ |
| `{tel}` | `案件基本信息.律师信息.lawyer_contact` | 联系电话 | 13800000000 | ✓ |

### 案件信息 (case_info)

| 原系统占位符 | YAML字段路径 | 中文名称 | 示例值 | 必填 |
|-------------|-------------|----------|--------|------|
| `{opposite}` | `案件基本信息.案件信息.opposing_party` | 对方当事人 | 北京某某公司 | ✓ |
| `{cause}` | `案件基本信息.案件信息.case_cause` | 案由 | 买卖合同纠纷 | ✓ |
| `{case_type}` | `案件基本信息.案件信息.case_type` | 案件类型 | 民事案件 | ✓ |
| `{client_opponent}` | `案件基本信息.案件信息.client_vs_opponent` | 委托人与对方关系 | 张三有限公司诉北京某某公司 | ✓ |

### 日期信息 (date_info)

| 原系统占位符 | YAML字段路径 | 中文名称 | 示例值 | 必填 |
|-------------|-------------|----------|--------|------|
| `{year}` | `日期信息.year` | 年份 | 2025 | ✓ |
| `{month}` | `日期信息.month` | 月份（两位数） | 05 | ✓ |
| `{day}` | `日期信息.day` | 日期（两位数） | 15 | ✓ |

## 完整YAML文件示例

```yaml
案件编号: "[2025]京0105民初1234号"
案件基本信息:
  委托人信息:
    client_name: "张三有限公司"
    client_type: "公司"
    client_code: "912345678901234567"
    client_address: "北京市朝阳区xxx街道123号"
    legal_representative: "李四"
    representative_position: "总经理"
  律师信息:
    lawyer_name: "王五"
    lawyer_contact: "13800000000"
  案件信息:
    opposing_party: "北京某某公司"
    case_cause: "买卖合同纠纷"
    case_type: "民事案件"
    client_vs_opponent: "张三有限公司诉北京某某公司"
日期信息:
  year: "2025"
  month: "11"
  day: "14"
案件状态:
  当前状态: "委托确定"
  阶段: "一审"
  风险等级: "中"
工作进度:
  已完成工作:
    - 案件分析 (2025-11-14)
  正在进行:
    - 委托材料制作 (完成度: 100%)
  待开始工作:
    - 证据整理
    - 起诉状起草
```

## 字段映射规则

### 1. 命名规范
- YAML字段：使用snake_case（client_name）
- 占位符：保持原系统格式（{client}）
- 中文名称：使用中文描述

### 2. 数据类型
- **字符串类型**：所有字段均为字符串类型
- **日期格式**：年、月、日均为两位数格式（05而非5）
- **代码字段**：身份证/信用代码直接使用字符串

### 3. 必填字段
所有标注"✓"的字段为委托文件生成的必填字段，缺少将导致文档生成失败。

### 4. 多值处理
- **律师信息**：当前为单值，如需支持多律师，需修改为列表格式
- **联系电话**：当前为单值，可扩展为列表

## 占位符使用示例

### Word模板中的使用
```
委托书

委托人：{client}，{type}，统一社会信用代码/身份证号：{code}，
住所地：{address}，法定代表人：{representative}，职务：{position}。

受托人：{lawyer}律师，联系电话：{tel}。

委托事项：
关于{client_vs_opponent}一案（案由：{case_cause}，案件类型：{case_type}），
现委托上述受托人作为我方的委托代理人。

委托期限：自{year}年{month}月{day}日至案件终结。

委托人（签字/盖章）：
{year}年{month}月{day}日
```

### 替换后结果
```
委托书

委托人：张三有限公司，公司，统一社会信用代码/身份证号：912345678901234567，
住所地：北京市朝阳区xxx街道123号，法定代表人：李四，职务：总经理。

受托人：王五律师，联系电话：13800000000。

委托事项：
关于张三有限公司诉北京某某公司一案（案由：买卖合同纠纷，案件类型：民事案件），
现委托上述受托人作为我方的委托代理人。

委托期限：自2025年11月14日至案件终结。

委托人（签字/盖章）：
2025年11月14日
```

## 向后兼容性

### 现有案件YAML处理
如果现有案件的YAML文件字段与标准不一致，系统将：
1. 自动尝试映射常见字段名
2. 缺失字段标记为待补全
3. 提供字段映射配置

### 字段扩展
未来如需添加新字段，在`placeholder_mapper.py`的`FIELD_MAPPING`字典中添加映射即可。

## 验证机制

### 自动验证
1. **字段完整性检查**：验证所有必填字段是否存在
2. **数据类型检查**：确保字段值为字符串类型
3. **格式检查**：验证日期格式、代码格式等

### 手动验证
1. **文档预览**：生成Word文档前显示占位符替换预览
2. **字段编辑器**：提供可视化的YAML字段编辑界面

## 变更记录

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|----------|------|
| v1.0 | 2025-11-14 | 初始版本，定义14个字段映射 | System |

## 相关文档

- [placeholder_mapper.py](../..//tools/placeholder_mapper.py) - 字段映射工具
- [DocxProcessor.py](../..//tools/DocxProcessor.py) - 文档处理工具
- [Writer Agent配置](../../agents/Writer.md) - Agent配置文档
- [委托确定工作流](委托确定工作流.md) - 工作流文档
- [工具使用指南](工具使用指南.md) - 工具使用说明