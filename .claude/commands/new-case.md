# /new-case - 创建新案件

## 功能说明
为新案件创建标准化的工作目录结构，自动复制案件模板并初始化管理文件。

## 使用方式

### 基本用法
```bash
/new-case [参数]
```

### 参数选项

#### 必需参数
- `--case-id TEXT` - 案件编号
  - 有案号格式：`[YYYY]省[城市]民初/行初/刑初[序号]号`
  - 无案号格式：`{原告姓名}诉{被告姓名}{案由}`

#### 可选参数
- `--client-name TEXT` - 委托人姓名/公司名
- `--case-type TEXT` - 案件类型（民事/刑事/行政）
- `--case-cause TEXT` - 案由
- `--opposite-party TEXT` - 对方当事人
- `--output-dir TEXT` - 输出目录（默认：output/）

### 使用示例

#### 1. 创建有案号的案件
```bash
/new-case \
  --case-id "[2025]京0105民初1234号" \
  --client-name "北京科技有限公司" \
  --case-type "民事" \
  --case-cause "合同纠纷" \
  --opposite-party "上海某某公司"
```

#### 2. 创建无案号的案件
```bash
/new-case \
  --case-id "张三诉李四合同纠纷案" \
  --client-name "张三" \
  --case-type "民事" \
  --case-cause "合同纠纷" \
  --opposite-party "李四"
```

#### 3. 最小必需参数
```bash
/new-case --case-id "[2025]京0105民初1234号"
```

## SubAgent 工作流

此Command会触发以下SubAgent工作流：

```
1. DocAnalyzer (文档分析器)
   ↓
2. Scheduler (日程规划者)
   ├─ 创建案件目录结构
   ├─ 复制case-templates模板
   ├─ 初始化[Y案件编号].yaml
   ├─ 初始化[Y案件编号].md
   └─ 创建工作记录模板
   ↓
3. Reporter (报告整合器)
```

## 输出内容

### 自动创建的目录结构（12目录架构）
```
output/[案件编号]/
├── 📅 00 - 日程管理/                 # 案件看板、时间线、期限预警、工时统计
│   ├── 日程安排/
│   ├── 工时统计/
│   ├── 期限提醒/
│   ├── [案件编号].yaml            # 案件管理看板数据（核心文件）
│   ├── [案件编号].md              # 案件工作记录看板
│   └── 工作记录模板.md
├── 🤝 01 - 委托材料/                 # 委托合同、授权书、谈话笔录、服务方案
├── 📄 02 - 案件分析/                 # 案件分析报告、争议焦点、风险评估、策略方案
├── 🔍 03 - 法律研究/                 # 法条检索、判例研究、法律适用、学术观点【前置核心】
├── 📤 04 - 客户提供/                 # 客户文档、需求确认、反馈记录、补充材料
├── 📎 05 - 证据材料/                 # 证据清单、质证意见、鉴定报告、补充证据
├── 📝 06 - 法律文书/                 # 起诉状、答辩状、代理词、申请书等各类文书
│   ├── 起诉状/
│   ├── 答辩状/
│   ├── 代理词/
│   ├── 质证意见书/
│   ├── 申请书/
│   ├── 上诉状/
│   ├── 律师函/
│   ├── 调解协议/
│   ├── 保全申请/
│   ├── 执行申请/
│   ├── 法律意见书/
│   └── 其他文书/
├── 📥 07 - 对方提交/                 # 对方起诉状、证据、答辩书、上诉材料
├── 🏛️ 08 - 法院送达/                 # 传票、裁定、判决书、送达回证
├── 🎯 09 - 庭审笔录/                 # 庭审记录、庭后分析、庭审摘要
├── 📊 10 - 综合报告/                 # 案件摘要、阶段报告、总结分析、客户汇报
└── 📚 11 - 参考文件/                 # 参考案例、法律条文、行业标准、其他参考
```

## 技术实现

### 核心流程

1. **案件目录创建**
   - 复制自 `.claude/templates/case-templates/`
   - 包含完整的12层目录结构（00-11）
   - 支持按需选择模板类型（AI工作流/实务流程/混合模式）

2. **YAML管理文件生成**
   ```yaml
   案件基本信息:
     案件编号: "[案件编号]"
     案件性质: "民事/刑事/行政"
     当前状态: "初始阶段"
     案件阶段: "一审"

   当事人信息:
     委托人: "[委托人]"
     对方当事人: "[对方]"
     案由: "[案由]"

   工作进度:
     已完成工作: []
     正在进行: []
     待开始工作:
       - 案件分析
       - 证据整理
       - 法律研究
   ```

3. **MD工作记录生成**
   - 案件基本信息记录
   - 工作时间线模板
   - 每日工作记录格式

### 模板来源
- 位置：`.claude/templates/case-templates/`
- 包含：12个标准目录（00-11）+ 工作记录模板
- 每个目录包含详细的README.md说明文件
- 案件管理文件：[案件编号].yaml + [案件编号].md

### Agent目录映射
- **00 - 日程管理** ← Scheduler（期限管理、工时统计）
- **01 - 委托材料** ← Writer（委托合同、授权书）
- **02 - 案件分析** ← DocAnalyzer + Strategist（案件分析、策略方案）
- **03 - 法律研究** ← IssueIdentifier + Researcher（争议焦点、法条检索）
- **04 - 客户提供** ← DocAnalyzer（客户材料分析）
- **05 - 证据材料** ← EvidenceAnalyzer（证据分析、质证意见）
- **06 - 法律文书** ← Writer（各类法律文书）
- **07 - 对方提交** ← DocAnalyzer + EvidenceAnalyzer（对方材料分析）
- **08 - 法院送达** ← DocAnalyzer + Scheduler（法院文书、期限管理）
- **09 - 庭审笔录** ← DocAnalyzer + Summarizer（庭审记录、分析摘要）
- **10 - 综合报告** ← Summarizer + Reporter（案件摘要、综合报告）
- **11 - 参考文件** ← Researcher（参考材料、知识库）

## 注意事项

1. **案件编号格式**：
   - 有案号：严格按照法院格式 `[YYYY]省[城市]民初/行初/刑初[序号]号`
   - 无案号：使用当事人信息 `{原告}诉{被告}{案由}`

2. **文件权限**：
   - 所有目录自动创建 `.gitkeep` 保持结构
   - YAML和MD文件自动生成并填充基础信息

3. **目录清理**：
   - 输出目录存在时会提示确认
   - 可使用 `--force` 参数强制覆盖

## 相关命令

- `/generate-trust-docs` - 生成委托材料
- `/evidence-review` - 证据质证
- `/generate-pleading` - 生成答辩状
