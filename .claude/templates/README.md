# Templates 目录

## 用途说明

该目录存放SuitAgent系统的**模板文件**，包括委托文件模板、案件工作区模板等。这些模板提供了标准化的结构和格式，可以被Agent和工具快速引用和复制。

## 设计原则

1. **标准化**：提供统一的标准模板
2. **可复制**：模板文件可以直接复制使用
3. **版本化**：支持不同版本的模板
4. **分类管理**：按用途和类型组织模板

## 目录结构

```
.claude/templates/
├── README.md                         # 本文件
├── 公司委托模板-剑桥颐华/                  # 律所专有模板（被忽略）
├── 个人委托模板-剑桥颐华/                  # 律所专有模板（被忽略）
├── case-templates/                    # 通用案件模板（版本控制）
│   ├── .gitkeep
│   ├── 📅 00 - 日程管理/                 # 日程管理模板（期限、工时、看板）
│   ├── 🤝 01 - 委托材料/                 # 委托材料模板
│   ├── 📄 02 - 案件分析/                 # 案件分析模板
│   ├── 🔍 03 - 法律研究/                 # 法律研究模板（前置核心）
│   ├── 📤 04 - 客户提供/                 # 客户提供材料模板
│   ├── 📎 05 - 证据材料/                 # 证据材料模板
│   ├── 📝 06 - 法律文书/                 # 法律文书模板
│   ├── 📥 07 - 对方提交/                 # 对方提交材料模板
│   ├── 🏛️ 08 - 法院送达/                 # 法院送达文书模板
│   ├── 🎯 09 - 庭审笔录/                 # 庭审笔录模板
│   ├── 📊 10 - 综合报告/                 # 综合报告模板
│   ├── 📚 11 - 参考文件/                 # 参考文件模板
│   └── md2word/                       # Markdown转Word模板
│       └── md2word_template.docx
```

## 模板类型

### 1. 委托文件模板

#### 律所专有模板
```
公司委托模板-剑桥颐华/     # 9个Word文档
个人委托模板-剑桥颐华/     # 8个Word文档
```

**特点**：
- 包含律所专有信息和格式
- 使用`{占位符}`定义变量
- 通过`placeholder_mapper.py`进行字段映射
- 被`.gitignore`排除，不纳入版本控制

**文件格式**：
- **.docx** - Word文档格式，可编辑和定制
- **命名**：使用数字前缀和描述性名称
  - `000委托文件清单.docx`
  - `004委托代理合同.docx`
  - `005授权委托书（公司）.docx`

#### 通用委托模板（待创建）
```
通用委托模板/              # 标准化模板
├── 公司委托/
│   └── *.docx
└── 个人委托/
    └── *.docx
```

### 2. 文档转换模板

#### md2word模板
```
md2word/                       # Markdown转Word模板
└── md2word_template.docx      # 标准转换模板
```

**特点**：
- 用于`/2word`命令的格式转换
- 支持默认、简单、法律文书标准等多种格式
- 提供可自定义的格式配置

**使用方法**：
```bash
/2word --format=格式名称 input.md output.docx
```

**格式类型**：
- default - 默认格式（仿宋_GB2312 + Times New Roman）
- legal-standard - 法律文书标准格式
- simple - 简化格式
- 自定义格式

### 3. 案件模板（v3.0 - 12目录架构）

#### case-templates - 案件工作区模板
**用途**：为SubAgent创建新案件时提供标准目录结构，覆盖诉讼全生命周期

**包含内容**：
- `📅 00 - 日程管理/` - 日程管理目录（期限、工时、看板）
- `🤝 01 - 委托材料/` - 委托材料目录
- `📄 02 - 案件分析/` - 案件分析目录
- `🔍 03 - 法律研究/` - 法律研究目录（前置核心）
- `📤 04 - 客户提供/` - 客户提供材料目录
- `📎 05 - 证据材料/` - 证据材料目录
- `📝 06 - 法律文书/` - 法律文书目录
- `📥 07 - 对方提交/` - 对方提交材料目录
- `🏛️ 08 - 法院送达/` - 法院送达文书目录
- `🎯 09 - 庭审笔录/` - 庭审笔录目录
- `📊 10 - 综合报告/` - 综合报告目录
- `📚 11 - 参考文件/` - 参考文件目录

**核心文件**：
- `[案件编号].yaml` - 案件管理看板数据（v3.0版本）
- `[案件编号].md` - 案件工作记录看板

**文件格式**：
- **.md** - Markdown格式，便于阅读和编辑
- **.gitkeep** - 空文件，保持目录结构
- **README.md** - 每个目录的详细说明文档
- **.yaml** - 结构化数据，便于Agent解析

## 文件命名规范

### Word文档模板
- **格式**：`{序号}_{描述}.docx`
- **示例**：`000委托文件清单.docx`, `004委托代理合同.docx`
- **序号**：使用3位数字，便于排序

### 案件模板
- **目录**：`{序号}_{目录名}/`
- **示例**：`01_案件分析`, `06_日程管理`
- **序号**：使用2位数字，按工作流顺序

### 工作记录模板
- **格式**：`[案件编号].{md|yaml}`
- **示例**：`[2025]京0105民初1234号.md`

## 模板变量格式

### 占位符格式
在Word文档中使用：`{变量名}`

**示例**：
```
{client}           - 委托人姓名
{lawyer}           - 代理律师姓名
{year}             - 年份
{month}            - 月份
{day}              - 日期
```

### 变量映射
通过`.claude/tools/placeholder_mapper.py`进行字段映射：
```python
YAML字段 → 占位符
client_name → {client}
lawyer_name → {lawyer}
year → {year}
```

## 使用规范

### 1. 模板引用
```python
# 在工具中使用
template_path = ".claude/templates/case-templates/"
output_path = "output/[案件编号]/"

# 复制模板
shutil.copytree(template_path, output_path)
```

### 2. 字段替换
```python
# 使用placeholder_mapper.py
from .placeholder_mapper import yaml_to_placeholders

placeholders = yaml_to_placeholders(yaml_data)
DocxProcessor.replace_in_docx(template_file, placeholders)
```

### 3. 目录创建
```python
# Agent中使用
for subdir in ["01_案件分析", "02_法律研究", ...]:
    os.makedirs(f"output/{case_id}/{subdir}")
    with open(f"output/{case_id}/{subdir}/.gitkeep", "w") as f:
        f.write("")
```

## 添加新模板

### Step 1: 确定模板类型
- Word文档 → 委托模板目录
- 案件结构 → `case-templates/`
- 工作记录 → `case-templates/`

### Step 2: 创建模板文件
1. 遵循命名规范
2. 使用正确的格式
3. 添加必要的说明

### Step 3: 更新映射（如需要）
如果添加了新变量，更新`.claude/tools/placeholder_mapper.py`

### Step 4: 更新文档
在本README中添加新模板的说明

## 最佳实践

1. **保持格式**：不要破坏Word文档的原有格式
2. **变量清晰**：占位符名称应简洁明了
3. **文档完整**：提供模板使用说明
4. **版本管理**：重要变更使用版本号
5. **测试验证**：模板修改后进行测试

## 注意事项

- ❌ **不要**在模板中使用绝对路径
- ❌ **不要**引用不存在的变量
- ❌ **不要**修改.gitignore配置
- ✅ **必须**遵循命名规范
- ✅ **必须**使用正确的文件格式
- ✅ **应该**保持模板的可重用性

## 与其他模块的关系

- **与 `tools/`**：模板处理依赖工具函数
- **与 `agents/`**：Agent使用模板创建工作结构
- **与 `commands/`**：Command说明中引用模板路径
- **与 `memory/`**：模板使用说明可在Memory中查找

## 相关文档

- [委托文件生成系统整合报告](../../docs/委托文件生成系统整合报告.md)
- [字段映射工具说明](../tools/placeholder_mapper.py)
- [Word文档处理工具](../tools/DocxProcessor.py)
- [系统架构文档](../../docs/ARCHITECTURE.md)
